# TSID-Dart

A Dart library for generating Time-Sorted Unique Identifiers (TSID).

This library is a Dart implementation of [tsid-creator](https://github.com/f4b6a3/tsid-creator)

Create a TSID:
```dart
  var tsid = Tsid.getTsid();
```

Create a TSID as long:
```dart
var number = Tsid.getTsid().toLong();
```

create a TSID as string:
```dart
var string = Tsid.getTsid().toString();
```

### Cross-Platform Usage and JavaScript Interoperability

TSIDs generated by this library are designed to be compatible and usable across different platforms, including native Dart environments (like servers or CLI tools) and web applications compiled to JavaScript.

**Key Recommendation: Use String Representation for Data Exchange**

When TSID values need to be exchanged:
*   Between different platforms (e.g., Dart backend to a web frontend).
*   Crucially, when interfacing with JavaScript environments.

**it is strongly recommended to always use their string representation.**

*   Use `tsid.toString()` to get the default Crockford Base32-like string (e.g., `"0AV1V4T2P6K9X8ZJ"`).
*   Use `Tsid.encode(tsid, base)` if you need a representation in a different base (e.g., base 10 or base 16).

To convert the string representation back into a `Tsid` object:
*   Use `Tsid.fromString(string)` for the default format.
*   Use `Tsid.decode(string, base)` for other base representations.

**Why String Representation? JavaScript Number Limitations**

JavaScript's standard `Number` type can only safely represent integers up to `2^53 - 1`. TSIDs are 64-bit values, which are often much larger than this limit. Passing a full 64-bit TSID as a numerical type directly to JavaScript will likely result in **precision loss and data corruption**.

While the web-specific version of this library (`package:tsid_dart/src/tsid_web.dart`) uses `BigInt` internally to maintain full 64-bit precision within Dart web applications, this internal representation does not change how JavaScript itself handles large numbers. Therefore, when sending a TSID *to* JavaScript or receiving one *from* JavaScript, string representation is the safest and most reliable method. For scenarios where you have control over the JavaScript environment and can ensure the use of JavaScript's `BigInt` type, direct passing of `BigInt` values from Dart (e.g., from `tsid.toLong()`) to JavaScript functions expecting `BigInt` can also maintain precision. The library's test suite includes verification for this specific interop pattern.

**Consistency Guaranteed**

This library includes cross-platform consistency tests (see `test/cross_platform_consistency_test.dart`) to ensure that `toString()`, `fromString()`, `encode()`, and `decode()` methods work consistently across native and web implementations, guaranteeing reliable data exchange when using string representations.

### Dependency

```yaml
# pubspec.yaml
...
dependencies:
  tsid_dart: ^0.0.2
...
```